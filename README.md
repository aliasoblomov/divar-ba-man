
# 🏠 ربات ارسال آگهی‌های دیوار به تلگرام با n8n

با این پروژه، دیگه نیاز نیست هر چند دقیقه یه بار دیوار رو رفرش کنی تا یه آگهی خوب پیدا کنی!  
یه اتومیشن سبک با n8n ساختیم که خودش هر نیم‌ساعت یه بار می‌ره سر بزنه، آگهی‌های جدید رو پیدا می‌کنه و مستقیم برات توی یه چنل تلگرام می‌فرسته.

---

## 💡 مشکل از کجا شروع شد؟

وقتی به‌دنبال خونه مناسب برای اجاره باشی و آگهی‌ها سریع پر بشن، مجبوری مدام دیوار رو چک کنی — کاری که هم وقت‌گیر و هم خسته‌کننده‌ست.  
اینجا بود که ایده‌ی یه اتومیشن اومد وسط...

---

## ⚙️ این پروژه چیکار می‌کنه؟

1. هر ۳۰ دقیقه به صورت خودکار اجرا میشه.
2. از دیوار با استفاده از URL فیلترشده (مثلاً محله شیرازی، ۲ خوابه، با پارکینگ، و...) دیتا می‌گیره.
3. اطلاعات مهم مثل عنوان، رهن، اجاره، تاریخ انتشار و لینک رو استخراج می‌کنه.
4. فقط آگهی‌هایی که توی ۱ ساعت گذشته منتشر شدن رو نگه می‌داره.
5. با یه پیام خوشگل و قالب HTML، اطلاعات رو برای تلگرام آماده می‌کنه.
6. و در نهایت، اون پیام رو توی چنل تلگرامی‌ای که تعریف کردی می‌فرسته.

---

## 🧩 داخل این ریپو چی هست؟

- `Divar-Ba-Man-Workflow.json`: فایل نودهای n8n برای ایمپورت مستقیم
- کد جاوااسکریپت اختصاصی برای تبدیل تاریخ‌ها به فرمت شمسی با اعداد فارسی
- regex برای خوندن اطلاعات آگهی‌ها از HTML
- فیلتر برای جلوگیری از ارسال آگهی تکراری یا قدیمی
- فرمت آماده پیام برای تلگرام به‌صورت HTML

---

## 🧰 پیش‌نیازها

- [n8n](https://n8n.io) نصب‌شده روی سیستم یا سرور
- یک توکن بات تلگرام
- یک کانال تلگرام که بات در آن ادمین باشد
- (اختیاری) لینک اختصاصی فیلترشده دیوار بر اساس نیاز خودت

---

## 🚀 شروع سریع

1. فایل json رو دانلود کن:

2. فایل `Divar-Ba-Man-Workflow.json` رو توی n8n ایمپورت کن.

3. لینک دیوار فیلترشده‌ت رو در نود `Fetch Divar Data` تنظیم کن.

4. توکن و chat ID تلگرام رو در نود `Send Selected Posts` وارد کن.

5. ورک‌فلو رو فعال کن و بذار خودش کارش رو بکنه ✨

---

## 🛠 تکنولوژی‌های استفاده‌شده

* [n8n](https://n8n.io)
* JavaScript برای پردازش داده‌ها
* Regex برای استخراج دیتا از HTML صفحات دیوار

---

## ✏️ قابلیت شخصی‌سازی

می‌تونی خیلی راحت چیزهای زیر رو تغییر بدی:

* 🔍 آدرس لینک دیوار برای فیلتر کردن (محله، قیمت، تعداد اتاق و…)
* 💬 قالب پیام ارسالی به تلگرام
* ⏰ فاصله زمانی اجرای اتومیشن (نیم‌ساعته، ساعتی، روزانه...)

---

## 📥 نمونه پیام خروجی در تلگرام

```
📣 شکار لحظه‌ها! یه خونه جدید رو دیوار پیدا شد!

🏠 عنوان: اجاره آپارتمان ۲ خوابه در شیرازی

💰 ۵۰۰ میلیون ودیعه  
💰 ۸ میلیون اجاره

📅 ۸ تیر ، ۱۷:۴۵  
🗒️ منتشر شده در ۱ ساعت پیش

👀 زود باش:
بریم ببینیم!
```

---

## 🤝 همکاری

اگر دوست داشتی به این پروژه کمک کنی — چه با بهبود regex، چه با افزودن قابلیت‌های جدید یا حتی اتصال به پلتفرم‌های دیگه — با آغوش باز منتظر PR هات هستم.

